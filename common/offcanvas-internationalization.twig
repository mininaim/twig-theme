<div class="offcanvas offcanvas-end border-0 shadow-sm" tabindex="-1" data-bs-scroll="true" id="offcanvasCountries" aria-labelledby="offcanvasCountriesLabel">
	<div class="offcanvas-header bg-secondary-subtle">
		<h6 class="offcanvas-title fw-bold" id="offcanvasCountriesLabel">
			{{ locals.offcanvasCountries.header.title }}
		</h6>
		<button type="button" class="btn-none p-0 text-body-emphasis grow" data-bs-dismiss="offcanvas" aria-label="{{ locals.accessibility.close.label }}">
			<i class="ti ti-x align-middle fs-5" aria-hidden="true"></i>
		</button>
	</div>
	<form class="d-flex flex-column offcanvas-body p-0" action="/customer/lang-shipping-country" method="POST">

		<input type="hidden" name="_token" value="{{ csrf_token }}">
		<input type="hidden" name="permalink" value="{{ store.permalink }}">
		<input type="hidden" id="redirect-to" name="redirect_to" value="{{ requestUri() }}">

		{% if store.is_filter_products_based_on_city %}
		<input type="hidden" class="js-input-change-session-delivery-country" name="deliveryCountry" value="{{ session.country.id }}">
		{% endif %}

		<div class="offcanvas-body p-0">
			<div class="mt-3">

			{% if not ('hide_language' in offcanvasInternationalization.header_options) %}
					<div class="flex-shrink-0 px-3">
						<div class="form-floating">
							<select name="language" class="form-select" id="floatingSelectLanguage" aria-label="{{ locals.accessibility.select.language }}">
								{% for storeLang in store.languages %}
									<option value="{{ storeLang.code }}" {% if session.lang.code == storeLang.code %} selected {% endif %}>{{ storeLang.name }}</option>
								{% endfor %}
							</select>
							<label for="floatingSelectLanguage">{{ locals.offcanvasCountries.body.language }}</label>
						</div>
					</div>
				{% endif %}

			{% if not store.is_filter_products_based_on_city  %}

				{% if not ('hide_country' in offcanvasInternationalization.header_options) %}
					<div class="flex-shrink-0 px-3 mt-3">
						<div class="form-floating">
							<select name="country" class="form-select" id="floatingSelectCountry" aria-label="{{ locals.accessibility.select.country }}">
								{% for storeCurrency in store.currencies %}
									<option data-currency="{{ storeCurrency.code }}" data-currency-symbol="{{ storeCurrency.symbol }}" value="{{ storeCurrency.country.code }}" {% if session.currency.country.code == storeCurrency.country.code %} selected {% endif %}>
										{{ storeCurrency.country.name }}
									</option>
								{% endfor %}
							</select>
							<label for="floatingSelectCountry">{{ locals.offcanvasCountries.body.country }}</label>
						</div>
					</div>
				{% endif %}

			{% else %}

				{% if not ('hide_country' in offcanvasInternationalization.header_options) %}
					<div class="flex-shrink-0 px-3 mt-3">
						<div class="form-floating">
							<select name="currency" class="form-select" id="floatingSelectCurrency" aria-label="{{ locals.accessibility.select.currency }}">
								{% for storeCurrency in store.currencies %}
									<option data-currency="{{ storeCurrency.code }}" data-currency-symbol="{{ storeCurrency.symbol }}" value="{{ storeCurrency.code }}" {% if storeCurrency.code == session.currency.code %} selected {% endif %}>
										{{ storeCurrency.symbol }}
									</option>
								{% endfor %}
							</select>
							<label for="floatingSelectCurrency">{{ locals.offcanvasCountries.body.currency }}</label>
						</div>
					</div>
				{% endif %}

				{% if not ('hide_country' in offcanvasInternationalization.header_options) %}
					<div class="flex-shrink-0 px-3 mt-3">
						<div class="form-floating">
							<select name="country" class="form-select" id="floatingSelectCountry" aria-label="{{ locals.accessibility.select.country }}" onchange="toggleDistinationCountryCities(event)">
								{% for country in store.countries %}
									<option data-country="{{ country.code }}" data-country-id="{{ country.id }}"  value="{{ country.code }}" {% if session.country.code == country.code %} selected {% endif %}>
										{{ country.name }}
									</option>
								{% endfor %}
							</select>
							<label for="floatingSelectCountry">{{ locals.offcanvasCountries.body.country }}</label>
						</div>
					</div>
				{% endif %}

				{% if not ('hide_country' in offcanvasInternationalization.header_options) %}
					<div class="flex-shrink-0 px-3 mt-3">
						<div class="form-floating">
						{% for country in store.countries %}
							<select name="city" {% if country.id != session.country.id %} disabled="true" {% endif %} class="form-select js-city-country js-city-country-id-{{ country.code }} {% if country.id != session.country.id %} d-none {% endif %}" id="floatingSelectCity" aria-label="{{ locals.accessibility.select.city }}">
								{% for city in country.cities %}
								<option value="{{ city.id }}" {% if city.id==session.country.city.id %} selected {% endif %}>{{city.name }}</option>
								{% endfor %}
							</select>
						{% endfor %}
							<label for="floatingSelectCity">{{ locals.offcanvasCountries.body.city }}</label>
						</div>
					</div>
				{% endif %}

				

			{% endif %}	

		
			</div>
		</div>
		<div class="px-3 py-3 p-md-3 sticky-bottom bg-secondary-subtle">
			<div class="d-grid gap-2">
				<button type="submit" class="btn btn-primary js-button-save" disabled>{{ locals.offcanvasCountries.footer.save }}</button>
			</div>
		</div>
	</form>
</div>

<script defer src="{{ assetUrl('offcanvas-internationalization.js') }}"></script>